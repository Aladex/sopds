Simple OPDS Catalog
Простой OPDS Каталог
Author: Dmitry V.Shelepnev
Версия 0.07

Установка Simple OPDS в Fedora:

1. Зависимости.
Для работы проекта необходимо установить следующие зависимости:
yum install httpd
yum install mysql
#Требуется Mysql не ниже версии 5 (необходима поддержка хранимых процедур)
yum install python3
yum install mysql-connector-python3

2. Установка.
Загрузить проект можно с сайта www.sopds.ru. 
Проект имеет следующую структуру:
opds				- каталог проекта (можно задать свое имя каталога)
	py			- каталог с программами на Python
	db			- каталог инициализационные скрипты для создания БД
	conf			- каталог с файлом конфигурации
	README.md		- файл README

Для работы CGI-скрипта необходимо разрешить доступ к каталогу opds, например при помощи следующих директив конфигурационного файла web-сервера Apache httpd.conf:

<Directory "/home/www/opds">
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
</Directory>
Alias   /opds           "/home/www/opds"

3. Конфигурационный файл.
Перед началом работы необходимо внести необходимые настройки в файл конфигурации ./conf/sopds.conf

4. Инициализация базы данных.
Для работы каталога необходимо создать(пересоздать) базу данных sopds при помощи скрипта:
./db/db_create.sh

5. Сканирование каталога с книгами.
Для сканирования каталога с электронными книгами запустить скрипт sopds-scan.py

6. Доступ к OPDS каталогу через WWW.
Для сервера Apache необходимо разрешить запуск cgi-скрипта ./py/sopds.cgi
при помощи директивы, помещенной в .htacess:
  Options ExecCGI
или
  Options +ExecCGI

7. Использование OPDS каталога с устройств поддерживающих OPDS.
Ввести OPDS каталог и следующий URL: your_domain_name/opds/py/sopds.cgi

8. Обновление версий
- Поскольку при переходе от версии к версии возможно изменение структуры БД необходимо пересоздать ее следующей командой
  ./db/db_create.sh
- После пересоздания БД и, как следствие уничтожении сыллок из БД на извлеченные обложки стоит удалить со всем содержимым
  папку covers
  rm -rf covers

