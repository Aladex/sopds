# Simple OPDS Catalog config file
#
[global]
db_name    = sopds
db_user    = sopds
db_pass    = sopds
db_host	   = localhost
db_charset = utf8

root_lib   = /mnt/SATA1TB-2/КНИГИ/BOOKS
#root_lib   = /mnt/SATA1TB-2/КНИГИ/TEST
formats    = .pdf .djvu .fb2 .txt

#Некоторым OPDS-клиентам требуется полный путь в HTTP-запросе
#таким образом cgi_path и cover_path - задают такие пути
#если закомментировать эти параметры, то будет применены параметры по умолчанию:
#cgi_path=sopds.cgi и cover_path=../covers
cgi_path=/opds/py/sopds.cgi
cover_path=/opds/covers

# Количество выдаваемых строк на одну страницу
maxitems   = 60

# dublicates_find = yes, приводит к поиску дубликатов на основании полей title, format и filesize
# при этом дубликат помещается в базу, но помечается как дубликат и может исключаться из выдачи
# при поиске по наименованиям и по авторам. В случае поиска по каталогам, книги, помеченные как дубликаты все равно будут показываться
dublicates_find = yes

# Указывает следует ли показывать книги, помеченные при сканировании как дубликаты в сортировках по наименованию и автору
dublicates_show = no

# Извлекать метаинформацию из книг fb2
fb2parse   = yes

# Если cover_extract = yes, то при сканировании книг fb2 из них извлекается изображение обложки
# файлы с изображениями обложек помещаются в каталог covers 
# При просмотре каталога OPDS-клиентом извлеченная обложка будет показываться
# если cover _show = 1 или 3
# Установка этой опции в yes значительно замедляет сканирование каталога (в 4-5 раз) 
# Но зато обложки в OPDS-клиенте будут загружаться практически мгновенно
cover_extract = no

# cover_show - способ показа обложек:
# 0 - не показывать, 
# 1 - показывать заранее извлеченные обложки, 
# 2 - извлекать обложки на лету и показывать 
# 3 - показать ранее извлеченную обложку, если обложка не извлекалась, то извелечь на лету и показать
# 
cover_show = 2

# Предположительно столько байт от начала файла fb2 необходимо считать, чтобы получить необходимую метаинформацию (только description), если 0 то парсится весь файл
# при использование числа отличного от 0 возможны ошибки (например description очень длинный и занимает более, чем указанное число байт)
# при установленном cover_enable=yes значение fb2size вне зависимости от установки считается равным 0
# Экспериментальная штука, лучше оставить равным 0
fb2hsize   = 0 

# zipscan = yes  - Приводит к сканированию файлов архива
zipscan    = yes

# ziprescan = no - Предотвращает повторное сканирование всего zip-архива
# Но в этом случае, если в архиве произойдут изменения (удаления, добавления), то сканер этого не "заметит"
ziprescan  = no

# Указываем какая кодировка для названий файлов используется в ZIP-архивах
# доступные кодировки: cp437, cp866, cp1251, utf-8
# по умолчанию применяется кодировка cp437
# Поскольку в самом ZIP архиве сведения о кодировке, в которой находятся имена файлов - отсутствуют
# то автоматически определить правильную кодировку для имен файлов не представляется возможным
# поэтому для того чтобы кириллические имена файлов не ваыглядели как крякозябры следует применять кодировку cp866
# по умолчанию также используется значение zip_codepage = cp866
zip_codepage = cp866

# Установка delete_logical=yes приведет к тому, что при обнаружении сканером, что книга удалена, запись в БД об этой книге будет удалена логически (avail=0)
# Если delete_logical=no, то произойдет физическое удаление таких записей из базы данных
delete_logical=no

# При таком количестве авторов в выдаче по авторам следующий уровень сортировки предоставляться уже не будет 
splitauthors = 300 
# При таком количестве наименований книг в выдаче по наименованиям следующий уровень сортировки предоставляться уже не будет
splittitles = 300

# Путь к конвертеру из fb2 в epub 
# (При наличии нескольких конвертеров путь должен быть только один, два конвертера одновременно все равно работать не будут)
# Если закомментировать эту опцию, либо конвертер не будет найден по указанному пути
# то скачать книги в формате EPUB предлагаться не будет
# Опция temp_dir указывает в каком каталоге создавать временные файлы во время преобразования fb2toepub
fb2toepub=../fb2toepub/unix_dist/fb2toepub
#fb2toepub=../fb2epub/fb2epub
temp_dir=/tmp

[site]
id=http://sopds.ru/
title=SOPDS.RU | OPDS Catalog
icon=http://sopds.ru/favicon.ico
autor=Dmitry Shelepnev
url=http://sopds.ru
email=admin@sopds.ru
main_title=ROOT of Simple OPDS Catalog
