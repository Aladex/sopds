Traceback (most recent call last):
  File "./sopdsd.py", line 184, in <module>
    daemon.start()
  File "./sopdsd.py", line 90, in start
    self.run()
  File "./sopdsd.py", line 170, in run
    scanner.log_options()
NameError: global name 'scanner' is not defined
2014-04-20 21:17:10,523 INFO      ***** Starting sopds-scan...
2014-04-20 21:20:17,078 INFO     Books added      : 0
2014-04-20 21:20:17,078 INFO     Books skipped    : 5569
2014-04-20 21:20:17,079 INFO     Books DB entries deleted : 0
2014-04-20 21:20:17,079 INFO     Books in archives: 0
2014-04-20 21:20:17,079 INFO     Archives scanned : 35
2014-04-20 21:20:17,080 INFO     Archives skipped : 127
2014-04-20 21:20:17,080 INFO     Bad archives     : 0
2014-04-20 21:20:17,081 INFO     Time estimated:0 hours, 3 minutes, 6 seconds.
2014-04-20 21:27:44,940 INFO      ***** Starting sopds-scan...
2014-04-20 21:31:54,480 INFO     Books added      : 0
2014-04-20 21:31:54,480 INFO     Books skipped    : 5569
2014-04-20 21:31:54,481 INFO     Books DB entries deleted : 0
2014-04-20 21:31:54,481 INFO     Books in archives: 0
2014-04-20 21:31:54,482 INFO     Archives scanned : 35
2014-04-20 21:31:54,482 INFO     Archives skipped : 127
2014-04-20 21:31:54,483 INFO     Bad archives     : 0
2014-04-20 21:31:54,483 INFO     Time estimated:0 hours, 4 minutes, 11 seconds.
2014-04-20 21:35:45,579 INFO      ***** Starting sopds-scan...
2014-04-20 21:39:27,670 INFO      ***** Starting sopds-scan...
2014-04-20 21:40:07,558 INFO      ***** Starting sopds-scan...
2014-04-20 21:41:09,482 INFO      ***** Starting sopds-scan...
2014-04-20 21:41:49,286 INFO      ***** Starting sopds-scan...
Traceback (most recent call last):
  File "./sopdsd.py", line 184, in <module>
    daemon.start()
  File "./sopdsd.py", line 90, in start
    self.run()
  File "./sopdsd.py", line 171, in run
    self.scanner.scan_all()
  File "/home/www/opds/py/sopdscan.py", line 88, in scan_all
    self.opdsdb.avail_check_prepare()
  File "/home/www/opds/py/sopdsdb.py", line 820, in avail_check_prepare
    cursor.execute(sql)
  File "/usr/lib/python3.3/site-packages/mysql/connector/cursor.py", line 508, in execute
    self._handle_result(self._connection.cmd_query(stmt))
  File "/usr/lib/python3.3/site-packages/mysql/connector/connection.py", line 636, in cmd_query
    result = self._handle_result(self._send_cmd(ServerCmd.QUERY, query))
  File "/usr/lib/python3.3/site-packages/mysql/connector/connection.py", line 554, in _handle_result
    raise errors.get_exception(packet)
mysql.connector.errors.DatabaseError: 1205 (HY000): Lock wait timeout exceeded; try restarting transaction
2014-04-20 21:43:41,567 INFO      ***** Starting sopds-scan...
2014-04-20 21:47:08,035 INFO     Books added      : 0
2014-04-20 21:47:08,036 INFO     Books skipped    : 5569
2014-04-20 21:47:08,036 INFO     Books DB entries deleted : 0
2014-04-20 21:47:08,037 INFO     Books in archives: 0
2014-04-20 21:47:08,037 INFO     Archives scanned : 35
2014-04-20 21:47:08,037 INFO     Archives skipped : 127
2014-04-20 21:47:08,038 INFO     Bad archives     : 0
2014-04-20 21:47:08,038 INFO     Time estimated:0 hours, 3 minutes, 26 seconds.
2014-04-20 21:47:38,067 INFO      ***** Starting sopds-scan...
2014-04-20 21:51:13,077 INFO     Books added      : 0
2014-04-20 21:51:13,078 INFO     Books skipped    : 11138
2014-04-20 21:51:13,084 INFO     Books DB entries deleted : 0
2014-04-20 21:51:13,085 INFO     Books in archives: 0
2014-04-20 21:51:13,085 INFO     Archives scanned : 70
2014-04-20 21:51:13,086 INFO     Archives skipped : 254
2014-04-20 21:51:13,086 INFO     Bad archives     : 0
2014-04-20 21:51:13,086 INFO     Time estimated:0 hours, 7 minutes, 31 seconds.
2014-04-20 21:52:11,941 INFO      ***** Starting sopds-scan...
2014-04-20 21:57:33,098 INFO     Books added      : 0
2014-04-20 21:57:33,099 INFO     Books skipped    : 5569
2014-04-20 21:57:33,099 INFO     Books DB entries deleted : 0
2014-04-20 21:57:33,100 INFO     Books in archives: 0
2014-04-20 21:57:33,100 INFO     Archives scanned : 35
2014-04-20 21:57:33,100 INFO     Archives skipped : 127
2014-04-20 21:57:33,101 INFO     Bad archives     : 0
2014-04-20 21:57:33,101 INFO     Time estimated:0 hours, 5 minutes, 23 seconds.
2014-04-20 22:39:03,119 INFO      ***** Starting sopds-scan...
2014-04-20 22:42:45,399 INFO     Books added      : 0
2014-04-20 22:42:45,400 INFO     Books skipped    : 5569
2014-04-20 22:42:45,400 INFO     Books DB entries deleted : 0
2014-04-20 22:42:45,400 INFO     Books in archives: 0
2014-04-20 22:42:45,401 INFO     Archives scanned : 35
2014-04-20 22:42:45,401 INFO     Archives skipped : 127
2014-04-20 22:42:45,401 INFO     Bad archives     : 0
2014-04-20 22:42:45,402 INFO     Time estimated:0 hours, 3 minutes, 42 seconds.
2014-04-20 22:51:37,850 INFO      ***** Starting sopds-scan...
2014-04-20 22:55:05,323 INFO     Books added      : 0
2014-04-20 22:55:05,324 INFO     Books skipped    : 5569
2014-04-20 22:55:05,324 INFO     Books DB entries deleted : 0
2014-04-20 22:55:05,324 INFO     Books in archives: 0
2014-04-20 22:55:05,325 INFO     Archives scanned : 35
2014-04-20 22:55:05,325 INFO     Archives skipped : 127
2014-04-20 22:55:05,325 INFO     Bad archives     : 0
2014-04-20 22:55:05,326 INFO     Time estimated:0 hours, 3 minutes, 27 seconds.
2014-04-20 23:06:31,166 INFO     sopdsDaemon initializing...
2014-04-20 23:06:31,167 INFO     sopdsDaemon stopping...
2014-04-20 23:06:56,923 INFO     sopdsDaemon initializing...
2014-04-20 23:06:56,924 INFO     sopdsDaemon starting...
2014-04-20 23:06:56,975 INFO     sopdsDaemon entering in main loop...
2014-04-20 23:06:56,976 INFO      ***** Starting sopds-scan...
2014-04-20 23:07:34,128 INFO     sopdsDaemon initializing...
2014-04-20 23:10:13,182 INFO     Books added      : 0
2014-04-20 23:10:13,182 INFO     Books skipped    : 5569
2014-04-20 23:10:13,182 INFO     Books DB entries deleted : 0
2014-04-20 23:10:13,183 INFO     Books in archives: 0
2014-04-20 23:10:13,183 INFO     Archives scanned : 35
2014-04-20 23:10:13,183 INFO     Archives skipped : 127
2014-04-20 23:10:13,184 INFO     Bad archives     : 0
2014-04-20 23:10:13,184 INFO     Time estimated:0 hours, 3 minutes, 16 seconds.
2014-04-20 23:10:17,668 INFO     sopdsDaemon initializing...
2014-04-20 23:10:17,669 INFO     sopdsDaemon status checking...
2014-04-20 23:10:26,749 INFO     sopdsDaemon initializing...
2014-04-20 23:10:28,336 INFO     sopdsDaemon stopping...
2014-04-20 23:11:45,977 INFO     sopdsDaemon initializing...
2014-04-20 23:11:45,978 INFO     sopdsDaemon starting...
2014-04-20 23:11:46,034 INFO     sopdsDaemon entering in main loop...
2014-04-20 23:11:46,035 INFO      ***** Starting sopds-scan...
2014-04-20 23:12:24,175 INFO     sopdsDaemon initializing...
2014-04-20 23:12:24,177 INFO     sopdsDaemon starting...
2014-04-20 23:12:52,345 INFO     sopdsDaemon initializing...
2014-04-20 23:12:52,346 INFO     sopdsDaemon starting...
2014-04-20 23:12:52,421 INFO     sopdsDaemon entering in main loop...
2014-04-20 23:12:52,422 INFO      ***** Starting sopds-scan...
2014-04-20 23:13:42,993 INFO     sopdsDaemon initializing...
2014-04-20 23:13:42,994 INFO     sopdsDaemon starting...
2014-04-20 23:13:43,081 INFO     sopdsDaemon entering in main loop...
2014-04-20 23:13:43,083 INFO      ***** Starting sopds-scan...
2014-04-20 23:16:55,462 INFO     Books added      : 0
2014-04-20 23:16:55,463 INFO     Books skipped    : 5569
2014-04-20 23:16:55,463 INFO     Books DB entries deleted : 0
2014-04-20 23:16:55,463 INFO     Books in archives: 0
2014-04-20 23:16:55,464 INFO     Archives scanned : 35
2014-04-20 23:16:55,464 INFO     Archives skipped : 127
2014-04-20 23:16:55,464 INFO     Bad archives     : 0
2014-04-20 23:16:55,465 INFO     Time estimated:0 hours, 3 minutes, 12 seconds.
2014-04-20 23:18:04,858 INFO     sopdsDaemon initializing...
2014-04-20 23:18:04,859 INFO     sopdsDaemon status checking...
2014-04-20 23:18:17,781 INFO     sopdsDaemon initializing...
2014-04-20 23:18:17,782 INFO     sopdsDaemon stopping...
2014-04-20 23:18:52,474 INFO     sopdsDaemon initializing...
2014-04-20 23:18:52,475 INFO     sopdsDaemon starting...
2014-04-20 23:18:52,565 INFO     sopdsDaemon entering in main loop...
2014-04-20 23:18:52,570 INFO      ***** Starting sopds-scan...
2014-04-20 23:21:17,320 INFO     sopdsDaemon initializing...
2014-04-20 23:21:17,321 INFO     sopdsDaemon stopping...
2014-04-20 23:21:39,494 INFO     sopdsDaemon initializing...
2014-04-20 23:21:39,495 INFO     sopdsDaemon starting...
2014-04-20 23:21:39,545 INFO     sopdsDaemon entering in main loop...
2014-04-20 23:21:39,545 INFO      ***** Starting sopds-scan...
2014-04-20 23:28:48,768 INFO     sopdsDaemon __init__()...
2014-04-20 23:28:48,769 INFO     sopdsDaemon stop()...
2014-04-20 23:29:08,057 INFO     sopdsDaemon __init__()...
2014-04-20 23:29:08,058 INFO     sopdsDaemon start()...
2014-04-20 23:29:08,122 INFO     sopdsDaemon entering in main loop...
2014-04-20 23:29:08,123 INFO      ***** Starting sopds-scan...
2014-04-20 23:42:40,180 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-000024-030559.zip book file = 25453.fb2
2014-04-20 23:42:41,956 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-000024-030559.zip book file = 25608.fb2
2014-04-21 00:47:58,326 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-074392-091839.zip book file = 91582.fb2
2014-04-21 01:12:10,713 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-365000-370999.zip book file = 366784.fb2
2014-04-21 01:49:00,572 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-182285-187147.zip book file = 185993.fb2
2014-04-21 02:03:50,470 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 120844.fb2
2014-04-21 02:03:51,091 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 120845.fb2
2014-04-21 02:03:51,995 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 120867.fb2
2014-04-21 02:03:52,292 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 120869.fb2
2014-04-21 02:03:53,231 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 120882.fb2
2014-04-21 02:03:57,218 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 121005.fb2
2014-04-21 02:04:37,037 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 122485.fb2
2014-04-21 02:05:14,522 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 124269.fb2
2014-04-21 02:05:46,782 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 126076.fb2
2014-04-21 02:05:52,301 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 126390.fb2
2014-04-21 02:05:56,028 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 126570.fb2
2014-04-21 02:05:57,324 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 126620.fb2
2014-04-21 02:06:05,150 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 129300.fb2
2014-04-21 02:06:05,204 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 129304.fb2
2014-04-21 02:06:05,266 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 129305.fb2
2014-04-21 02:06:09,021 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 129556.fb2
2014-04-21 02:06:13,436 ERROR    Error processing ZIP file = /mnt/SATA1TB-2/КНИГИ/BOOKS/Художественная литература/LIB.RUS.EC/fb2-119691-132107.zip book file = 129813.fb2
2014-04-21 02:22:12,199 INFO     Books added      : 288522
2014-04-21 02:22:12,199 INFO     Books skipped    : 0
2014-04-21 02:22:12,200 INFO     Books DB entries deleted : 0
2014-04-21 02:22:12,200 INFO     Books in archives: 282953
2014-04-21 02:22:12,200 INFO     Archives scanned : 162
2014-04-21 02:22:12,200 INFO     Archives skipped : 0
2014-04-21 02:22:12,201 INFO     Bad archives     : 0
2014-04-21 02:22:12,201 INFO     Time estimated:2 hours, 53 minutes, 4 seconds.
2014-04-21 04:00:17,635 INFO      ***** Starting sopds-scan...
2014-04-21 04:03:58,687 INFO     Books added      : 288522
2014-04-21 04:03:58,722 INFO     Books skipped    : 5569
2014-04-21 04:03:58,723 INFO     Books DB entries deleted : 0
2014-04-21 04:03:58,723 INFO     Books in archives: 282953
2014-04-21 04:03:58,723 INFO     Archives scanned : 197
2014-04-21 04:03:58,723 INFO     Archives skipped : 127
2014-04-21 04:03:58,724 INFO     Bad archives     : 0
2014-04-21 04:03:58,724 INFO     Time estimated:4 hours, 34 minutes, 50 seconds.
2014-04-21 08:00:11,529 INFO      ***** Starting sopds-scan...
2014-04-21 08:03:16,654 INFO     Books added      : 288522
2014-04-21 08:03:16,655 INFO     Books skipped    : 11138
2014-04-21 08:03:16,655 INFO     Books DB entries deleted : 0
2014-04-21 08:03:16,655 INFO     Books in archives: 282953
2014-04-21 08:03:16,655 INFO     Archives scanned : 232
2014-04-21 08:03:16,655 INFO     Archives skipped : 254
2014-04-21 08:03:16,656 INFO     Bad archives     : 0
2014-04-21 08:03:16,656 INFO     Time estimated:8 hours, 34 minutes, 8 seconds.
2014-04-21 08:19:14,396 INFO     sopdsDaemon __init__()...
2014-04-21 08:19:14,397 INFO     sopdsDaemon restart()...
2014-04-21 08:19:14,397 INFO     sopdsDaemon stop()...
2014-04-21 08:19:16,400 INFO     sopdsDaemon start()...
2014-04-21 08:19:16,452 INFO     sopdsDaemon entering in main loop...
Traceback (most recent call last):
  File "./sopdsd.py", line 224, in <module>
    daemon.restart()
  File "./sopdsd.py", line 195, in restart
    Daemon.restart(self)
  File "./sopdsd.py", line 151, in restart
    self.start()
  File "./sopdsd.py", line 179, in start
    Daemon.start(self)
  File "./sopdsd.py", line 91, in start
    self.run()
  File "./sopdsd.py", line 205, in run
    self.scanner.init_statas()
AttributeError: 'opdsScanner' object has no attribute 'init_statas'
2014-04-21 08:19:16,456 INFO     sopdsDaemon delpid()...
2014-04-21 08:20:50,251 INFO     sopdsDaemon __init__()...
2014-04-21 08:20:50,252 INFO     sopdsDaemon start()...
2014-04-21 08:20:50,300 INFO     sopdsDaemon entering in main loop...
2014-04-21 08:20:50,301 INFO      ***** Starting sopds-scan...
2014-04-21 08:23:33,317 INFO     Books added      : 0
2014-04-21 08:23:33,318 INFO     Books skipped    : 5569
2014-04-21 08:23:33,318 INFO     Books DB entries deleted : 0
2014-04-21 08:23:33,319 INFO     Books in archives: 0
2014-04-21 08:23:33,319 INFO     Archives scanned : 35
2014-04-21 08:23:33,319 INFO     Archives skipped : 127
2014-04-21 08:23:33,320 INFO     Bad archives     : 0
2014-04-21 08:23:33,320 INFO     Time estimated:0 hours, 2 minutes, 43 seconds.
