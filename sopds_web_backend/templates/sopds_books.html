{% extends "sopds_main.html" %}

{% block body %}
{%  for b in books %}
		<div class="large-12 column">
			<b>{{ b.title }}</b>
			<i style="font-size:80%;">Скачать: </i>
			<i><a href="{% url 'opds_catalog:download' b.id 0 %}"><span class="label small">fb2</span></a></i>&nbsp;
			<i><a href="{% url 'opds_catalog:download' b.id 1 %}"><span class="label small">fb2+zip</span></a></i>&nbsp;
		</div>
		
		<div class="large-12 column">	
		    <table><tr>	
		    <td width="100px" style="padding:0rem 0rem;">
			     <img src="{% url 'opds_catalog:cover' b.id %}" type="image/jpeg" width="80px">
			</td>
			<td style="font-size:80%; padding:1rem 1rem;">
				<b>Название книги:</b> {{ b.title }} <br>
				{% if b.authors.count > 0 %}
				   <b>Авторы:</b>{% for a in b.authors %} {{a.last_name}} {{a.first_name}}{% if not forloop.last %},{%endif%} {%endfor%}<br>
				{% endif %}
				{% if b.genres.count > 0 %}
				   <b>Жанры:</b>{% for g in b.genres %} {{g.subsection}}{% if not forloop.last %},{%endif%} {%endfor%} <br>
				{% endif %}
				{% if b.series.count > 0 %}
				   <b>Серии:</b> {% for s in b.series %} {{s.ser}}{% if not forloop.last %},{%endif%} {%endfor%} <br>
				{% endif %}
				<b>Файл:</b> {{ b.filename }} <br>
				<b>Размер файла:</b> {{ b.filesize }}Кб.<br>
				<b>Дата правки:</b> {{ b.docdate }} <br>	
				{% if b.doubles > 0 %}
				<b>Дубликаты книги: </b> {{ b.title }} ({{b.doubles}}шт.)
				{% endif %}
			</td>
			</tr>
			<tr>
			<td colspan="2">
			    <p style="font-size:80%;"> {{ b.annotation }} </p>
			</td>
			</tr></table>
		</div>			
{% endfor %}

{% if books.paginator.num_pages > 1 %}
<ul class="pagination" role="navigation" aria-label="Pagination">
  <li class="pagination-previous {% if not books.has_previous %}disabled{%endif%}">
      {% if books.has_previous %}<a href="{% url "web:searchbooks" %}?searchtype={{searchtype}}&searchterms={{searchterms}}&page={{books.previous_page_number}}" aria-label="Previous page"> {%endif%}
         Previous <span class="show-for-sr">page</span>
      {% if books.has_previous %}</a>{%endif%}
  </li>
  
  {% for pn in page_range %}
     {% if books.number == pn %}
        <li class="current"><span class="show-for-sr">You're on page</span> {{pn}}</li>
     {% else %}
        <li><a href="{% url "web:searchbooks" %}?searchtype={{searchtype}}&searchterms={{searchterms}}&page={{pn}}" aria-label="Page {{pn}}">{{pn}}</a></li>
     {% endif %}   
        {# <li class="ellipsis" aria-hidden="true"></li> #}
  {% endfor %}
  
  <li class="pagination-next" {% if not books.has_next %}disabled{%endif%}>
      {% if books.has_next %}<a href="{% url "web:searchbooks" %}?searchtype={{searchtype}}&searchterms={{searchterms}}&page={{books.next_page_number}}" aria-label="Next page">{%endif%}
         Next <span class="show-for-sr">page</span>
      {% if books.has_next %}</a>{%endif%}
  </li>
</ul>
{% endif %}

{% endblock %}  {# body #}